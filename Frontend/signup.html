<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="signup.css">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <title>Sign Up</title>
</head>

<body class="bg-fcf6bd">
    <!-- Navigation Bar -->
    <header class="topnav">
        <a href="index.html">Home</a>
        <a href="login.html">Log In</a>
        <a class="active" href="signup.html">Sign Up</a>
        <a href="browse.html">Browse</a>
        <a href="profile.html">Profile</a>
    </header>

    <!-- Star Background -->
    <div class="stars-wrapper">
        <!-- Stars will be dynamically styled with CSS -->
    </div>

    <!-- Form Container -->
    <div class="form-container">
        <form id="register-form" style="border:1px solid #ccc">
            <div class="container">
                <div class="intro">
                    <h1 class="bubble-text">Register Account</h1>
                    <p class="bubblewords">Please complete this form to create an account</p>
                </div>

                <label for="fullname"><b>Full Name</b></label>
                <input type="text" placeholder="Enter your full name" name="fullname" required>
                
                <label for="email"><b>Username</b></label>
                <input type="text" placeholder="Enter Username" name="username" required>

                <label for="email"><b>Email</b></label>
                <input type="text" placeholder="Enter Email" name="email" required>

                <label for="psw"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="psw" required>

                <label for="psw-repeat"><b>Repeat Password</b></label>
                <input type="password" placeholder="Repeat Password" name="psw-repeat" required>

                <label>Address Line One</label>
                <input type="text" placeholder="Address Line One" name="addressone" required>
                
                <label>Address Line Two</label>
                <input type="text" placeholder="Address Line Two" name="addresstwo" required>

                <label>Apartment No/ Building No</label>
                <input type="text" placeholder="Building No" name="buildingno">

                <label>City/Region</label>
                <input type="text" placeholder="Region" name="region" required>
                
                <label>Post Code</label>
                <input type="text" placeholder="Postcode" name="postcode" required>
                <label>
                    <input type="checkbox" checked="checked" name="remember" style="margin-bottom: 15px"> Remember Me
                </label>

                <p>By creating an account, you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>
               
                <div class="clearfix">
                    <button type="button" class="cancelbtn">Cancel</button>
                    <button type="submit" class="signupbtn">Sign Up</button>
                </div>
            </div>
        </form>
    </div>

    <script>

        document.getElementById("register-form").addEventListener("submit", function (e) {
            e.preventDefault();
    
            const form = e.target;
    
            const data = {
                username: form.username.value,           // 'username' input
                email: form.email.value,                 // 'email' input
                password: form.psw.value,                // 'password' input
                address: {
                    addressLine1: form.addressone.value, // 'addressone' input
                    addressLine2: form.addresstwo.value, // 'addresstwo' input
                    city: form.region.value,            // 'region' input
                    postcode: form.postcode.value,      // 'postcode' input
                    country: "UK"                       
                }
            };
    
            fetch("http://localhost:8080/api/users/register", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            })
            .then(response => response.text()) 
            .then(msg => alert(msg))            
            .catch(err => alert("Error: " + err));
        });
        </script>

</body>
</html>